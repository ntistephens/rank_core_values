function discard_phase_set_question_groups_for_round(e){shuffle(e),discard_phase_push_question_groups_into_round(e)}function discard_phase_push_question_groups_into_round(e){discard_phase_round.question_groups=[];for(let t=0;t<e.length;t++)e[t].is_assigned_question_group=!1;if(1==discard_phase_round.round_counter){for(let s=0;s<4;s++)if(0==s||1==s){var n=[],o=23;for(let r=0;r<e.length;r++)n.length!=o&&!1==e[r].is_assigned_question_group&&!1==e[r].discarded&&(n.push(e[r]),e[r].is_assigned_question_group=!0);discard_phase_round.question_groups.push(n)}else if(2==s||3==s){var n=[],o=22;for(let i=0;i<e.length;i++)n.length!=o&&!1==e[i].is_assigned_question_group&&!1==e[i].discarded&&(n.push(e[i]),e[i].is_assigned_question_group=!0);discard_phase_round.question_groups.push(n)}}else if(2==discard_phase_round.round_counter)for(let u=0;u<2;u++){var n=[],o=20;for(let d=0;d<e.length;d++)n.length!=o&&!1==e[d].is_assigned_question_group&&!1==e[d].discarded&&(n.push(e[d]),e[d].is_assigned_question_group=!0);discard_phase_round.question_groups.push(n)}}function resetDiscardPhaseQuestionDetails(e){e.to_keep_items=[],e.to_discard_items=[],e.question_pick_counter=0}function populateDiscardQuestionButtons(e){$(".discard-test-question-btn").each(function(t){1==e.round_counter&&e.question_group_index>1&&t>=22?$(this).addClass("d-none"):2==e.round_counter&&t>=20?$(this).addClass("d-none"):($(this).html(e.question_groups[e.question_group_index][t].name),$(this).attr("data-id",e.question_groups[e.question_group_index][t].id))})}function setItemToKeepDiscardPhase(e,t){t.to_keep_items.push(e)}function discardPhaseprocessDisplayQuestionResults(){$("#discard-test-question-prompt").addClass("d-none"),$("#discard-test-question-result").removeClass("d-none"),discardPhasedisplayTestResult(discard_phase_questionDetails),$("#discard-test-question-continue").removeClass("d-none")}function discardPhaseSetToDiscard(){for(discard_phase_round_item of discard_phase_round.question_groups[discard_phase_round.question_group_index]){let e=!0;for(keep_item of discard_phase_questionDetails.to_keep_items)discard_phase_round_item==keep_item&&(e=!1);!0==e&&discard_phase_questionDetails.to_discard_items.push(discard_phase_round_item)}}function discardPhasedisplayTestResult(e){let t="";for(keep_item of e.to_keep_items)t=t+"<li>"+keep_item.name+"</li>";$("#discard-result-to-keep").html(t);let s="";for(discard_item of e.to_discard_items)s=s+"<li>"+discard_item.name+"</li>";$("#discard-result-to-discard").html(s),$("#discard-test-question-result").removeClass("d-none")}function discardPhaseEndDisplayTestResult(){let e="",t="";for(item of all_items)!0==item.discarded?t=t+"<li>"+item.name+"</li>":e=e+"<li>"+item.name+"</li>";$("#discard-phase-end-kept").html(e),$("#discard-phase-end-discarded").html(t),$("#discard-phase-end-result").removeClass("d-none")}function discard_save_question_answer(e){for(discard_item of e.to_discard_items)discard_item.discarded=!0,discard_item.weightedVal=-99,discard_item.removed=!0,discard_item.round_removed="Discarded - Phase 1"}function discard_round_is_complete(){return 1==discard_phase_round.round_counter&&4==discard_phase_round.question_group_index||2==discard_phase_round.round_counter&&2==discard_phase_round.question_group_index}function discardprocessQuestionsForEndOfRound(){2==discard_phase_round.round_counter?discard_phase_set_question_groups_for_round(all_items):discard_phase_round.round_counter}function is_end_of_discard_phase(){return 3==discard_phase_round.round_counter}function update_filter_progress_bar(){var e=Math.round(++total_filter_questions_answered/6*100)+"%";$("#filter-progress-bar").width(e),$("#filter-progress-num-display").text(total_filter_questions_answered),total_filter_questions_answered>=1&&$("#filter_progress_percentage_inside_progress_bar").text(e)}function discardPhaseEndDisplayResults(){$("#discard-test-question-prompt").addClass("d-none"),$("#discard-phase-end-result").removeClass("d-none"),discardPhaseEndDisplayTestResult()}function set_question_groups_for_round(e){shuffle(e),push_question_groups_into_round(e),update_seen_items(round.question_groups),shuffle(round.question_groups)}function set_question_groups_for_round_phase_two_init_three_rounds(){let e=[];for(item of all_items)!1==item.discarded&&e.push(item);shuffle(e),set_question_groups_for_round(e)}function push_question_groups_into_round(e){round.question_groups=[];for(let t=0;t<e.length;t++)e[t].is_assigned_question_group=!1;for(let s=0;s<e.length;s+=5){var n=[];for(let o=0;o<e.length;o++)if(n.length<5&&!1==e[o].is_assigned_question_group&&projected_item_never_seen_by_other_questions_within_group(n,e[o]))n.push(e[o]),e[o].is_assigned_question_group=!0;else for(let r=0;r<e.length;r++)n.length<5&&!1==e[r].is_assigned_question_group&&projected_item_never_seen_by_other_questions_within_group(n,e[r])&&(n.push(e[r]),e[r].is_assigned_question_group=!0);if(n.length<5)for(let i=0;i<e.length;i++)n.length<5&&!1==e[i].is_assigned_question_group&&(n.push(e[i]),e[i].is_assigned_question_group=!0);round.question_groups.push(n)}for(let u=0;u<e.length;u++)e[u].is_assigned_question_group=!1}function projected_item_never_seen_by_other_questions_within_group(e,t){for(let s=0;s<e.length;s++)for(let n=0;n<e[s].seen_items.length;n++)if(e[s].seen_items[n]==t)return!1;return!0}function resetQuestionDetails(e){e.first_place_item=null,e.second_place_item=null,e.third_place_item=null,e.fourth_place_item=null,e.fifth_place_item=null,e.question_pick_counter=0}function populateQuestionButtons(e){$(".test-question-btn").each(function(t){$(this).html(e.question_groups[e.question_group_index][t].name),$(this).attr("data-id",e.question_groups[e.question_group_index][t].id)})}function item_not_in_group(e,t){for(let s in t)if(e==s)return!1;return!0}function setQuestionFirstSecondThirdPlace(e,t){1==t.question_pick_counter?t.first_place_item=e:2==t.question_pick_counter?t.second_place_item=e:3==t.question_pick_counter&&(t.third_place_item=e)}function setWasSel(e){e.wasSel=!0}function setQuestionLastPlaces(e,t){for(let s=0;s<e.length;s++)!1==e[s].wasSel&&null==t.fourth_place_item?(t.fourth_place_item=e[s],setWasSel(e[s])):!1==e[s].wasSel&&null!=t.fourth_place_item&&(t.fifth_place_item=e[s],setWasSel(e[s]))}function processDisplayQuestionResults(){$("#test-question-prompt").addClass("d-none"),$("#test-question-result").removeClass("d-none"),displayTestResult(questionDetails,$("#test-question-result-data")),5==round.round_counter&&1==round.question_group_index?$("#test-finish-btn").removeClass("d-none"):$("#test-question-continue").removeClass("d-none")}function shuffle(e){for(let t=e.length-1;t>0;t--){let s=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[s],e[s]=n}}function findById(e,t){for(let s in t)if(t[s].id==e)return t[s]}function update_seen_items(e){for(let t in e)for(let s in e[t])for(let n in e[t])e[t][s]!=e[t][n]&&item_not_in_group(e[t][n],e[t][s].seen_items)&&e[t][s].seen_items.push(e[t][n])}function displayTestResult(e,t){let s="1st: "+e.first_place_item.name+"<br>2nd: "+e.second_place_item.name+"<br>3rd: "+e.third_place_item.name+"<br>(Last Places: "+e.fourth_place_item.name+", "+e.fifth_place_item.name+")";$(t).html(s)}function resetWasSelOnQuestionItems(e){for(let t in e)e[t].wasSel=!1}function save_question_answer(e){e.first_place_item.weightedVal+=2,e.second_place_item.weightedVal++,e.third_place_item.weightedVal+=0,e.fourth_place_item.weightedVal--,e.fifth_place_item.weightedVal--}function round_is_complete(){return(1==round.round_counter||2==round.round_counter||3==round.round_counter)&&4==round.question_group_index||4==round.round_counter&&3==round.question_group_index||5==round.round_counter&&2==round.question_group_index}function processQuestionsForEndOfRound(){if(1==round.round_counter)set_question_groups_for_round_phase_two_init_three_rounds(all_items);else if(2==round.round_counter)set_question_groups_for_round_phase_two_init_three_rounds(all_items);else if(3==round.round_counter){for(let e in sortByTestRank(all_items),all_items)e>=15&&(all_items[e].removed=!0,"Discarded - Phase 1"!=all_items[e].round_removed&&(all_items[e].round_removed=round.round_counter));var t=[];for(let s in all_items)!1==all_items[s].removed&&t.push(all_items[s]);set_question_groups_for_round(t)}else if(4==round.round_counter){var n=[];for(let o in all_items)!1==all_items[o].removed&&n.push(all_items[o]);for(let r in sortByTestRank(n),n)r>=10&&(n[r].removed=!0,n[r].round_removed=round.round_counter);var t=[];for(let i in all_items)!1==all_items[i].removed&&t.push(all_items[i]);set_question_groups_for_round(t)}else if(5==round.round_counter){var n=[];for(let u in all_items)!1==all_items[u].removed&&n.push(all_items[u]);for(let d in sortByTestRank(n),n)d>=6&&(n[d].removed=!0,n[d].round_removed=round.round_counter)}}function sortByTestRank(e){return e.sort(function(e,t){return t.weightedVal-e.weightedVal})}function update_ranking_progress_bar(){var e=Math.round(++total_ranking_questions_answered/17*100)+"%";$("#ranking-progress-bar").width(e),$("#ranking-progress-num-display").text(total_ranking_questions_answered),total_ranking_questions_answered>=1&&$("#ranking_progress_percentage_inside_progress_bar").text(e)}function update_value_rankings_display(){if(sortByTestRank(all_items),all_rounds_are_completed())for(let e in $("#topTenValuesTableResultMsg").removeClass("d-none"),$("#valueRankingsDisplay").removeClass("d-none"),$("#valueRankingsDisplay").find("tbody").empty(),all_items)null==all_items[e].round_removed&&$("#valueRankingsDisplay").find("tbody").append("<tr><td>"+all_items[e].name+"</td><td>"+all_items[e].weightedVal+"</td></tr>");if(!0==debugging_flag||all_rounds_are_completed())for(let t in $("#fullTableResultsMsg").removeClass("d-none"),$("#valueRankingsDisplayFull").removeClass("d-none"),$("#valueRankingsDisplayFull").find("tbody").empty(),all_items)$("#valueRankingsDisplayFull").find("tbody").append("<tr><td>"+all_items[t].name+"</td><td>"+all_items[t].weightedVal+"</td><td>"+display_round_removed(all_items[t])+"</td></tr>")}function all_rounds_are_completed(){return 6==round.round_counter}function display_round_removed(e){return null==e.round_removed?" ":e.round_removed}
